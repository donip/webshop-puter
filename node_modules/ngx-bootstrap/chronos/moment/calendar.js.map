{"version":3,"sources":["../../../.tmp/chronos/moment/calendar.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,IAAI,EAAE,MAAM,QAAQ,CAAC;AAC9B,OAAO,EAAE,eAAe,EAAE,MAAM,iBAAiB,CAAC;AAClD,OAAO,EAAE,UAAU,EAAE,QAAQ,EAAE,MAAM,sBAAsB,CAAC;AAC5D,OAAO,EAAE,SAAS,EAAE,MAAM,iBAAiB,CAAC;AAC5C,OAAO,EAAE,OAAO,EAAE,MAAM,uBAAuB,CAAC;AAChD,OAAO,EAAE,UAAU,EAAE,MAAM,WAAW,CAAC;AACvC,OAAO,EAAE,SAAS,EAAE,MAAM,mBAAmB,CAAC;AAkB9C,MAAM,4BAA4B,IAAU,EAAE,GAAS,EAAE,MAAyB;IAChF,IAAM,KAAK,GAAG,IAAI,CAAC,IAAI,EAAE,GAAG,EAAE,KAAK,EAAE,IAAI,EAAE,MAAM,CAAC,CAAC;IAEnD,MAAM,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;QACb,KAAK,KAAK,GAAG,CAAC,CAAC,EAAE,MAAM,CAAC,UAAU,CAAC;QACnC,KAAK,KAAK,GAAG,CAAC,CAAC,EAAE,MAAM,CAAC,UAAU,CAAC;QACnC,KAAK,KAAK,GAAG,CAAC,EAAE,MAAM,CAAC,SAAS,CAAC;QACjC,KAAK,KAAK,GAAG,CAAC,EAAE,MAAM,CAAC,SAAS,CAAC;QACjC,KAAK,KAAK,GAAG,CAAC,EAAE,MAAM,CAAC,SAAS,CAAC;QACjC,KAAK,KAAK,GAAG,CAAC,EAAE,MAAM,CAAC,UAAU,CAAC;QAClC,SAAS,MAAM,CAAC,UAAU,CAAC;IAC7B,CAAC;AACH,CAAC;AAED,MAAM,mBAAmB,IAAU,EACV,IAAU,EACV,OAAqB,EACrB,MAA4B,EAC5B,MAA8B;IAD9B,uBAAA,EAAA,SAAiB,SAAS,EAAE;IAC5B,uBAAA,EAAA,WAA8B;IACrD,kDAAkD;IAClD,2EAA2E;IAC3E,IAAM,GAAG,GAAG,IAAI,CAAC;IACjB,IAAM,GAAG,GAAG,OAAO,CAAC,eAAe,CAAC,GAAG,EAAE,IAAI,EAAG,MAAM,CAAC,EAAE,KAAK,EAAE,MAAM,CAAC,MAAM,CAAC,CAAC;IAC/E,IAAM,MAAM,GAAG,iBAAiB,CAAC,IAAI,EAAE,GAAG,EAAE,EAAC,MAAM,EAAE,IAAI,EAAE,OAAO,EAAE,CAAC,EAAC,CAAC,IAAI,UAAU,CAAC;IAEtF,IAAI,MAAM,CAAC;IACX,EAAE,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC;QACZ,IAAM,OAAO,GAAG,OAAO,CAAC,MAAM,CAAC,CAAC;QAChC,EAAE,CAAC,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;YACtB,MAAM,GAAG,OAAO,CAAC;QACnB,CAAC;QACD,EAAE,CAAC,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;YACxB,MAAM,GAAG,OAAO,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,EAAE,GAAG,CAAC,CAAC;QACzC,CAAC;IACH,CAAC;IAED,EAAE,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC;QACZ,MAAM,GAAG,MAAM,CAAC,QAAQ,CAAC,MAAM,EAAE,IAAI,EAAE,SAAS,CAAC,GAAG,CAAC,CAAC,CAAC;IACzD,CAAC;IAED,MAAM,CAAC,UAAU,CAAC,IAAI,EAAE,MAAM,EAAE,MAAM,CAAC,OAAO,CAAC,KAAK,EAAE,MAAM,CAAC,MAAM,EAAE,MAAM,CAAC,OAAO,CAAC,CAAC;AACvF,CAAC","file":"calendar.js","sourceRoot":"","sourcesContent":["import { diff } from './diff';\nimport { cloneWithOffset } from '../units/offset';\nimport { isFunction, isString } from '../utils/type-checks';\nimport { cloneDate } from '../create/clone';\nimport { startOf } from '../utils/start-end-of';\nimport { formatDate } from '../format';\nimport { getLocale } from '../locale/locales';\nimport { Locale } from '../locale/locale.class';\nimport { DateInput } from '../test/chain';\nimport { DateParsingConfig } from '../create/parsing.types';\n\nexport type CalendarSpecVal = string | ((m?: DateInput, now?: Date) => string);\nexport interface CalendarSpec {\n  sameDay?: CalendarSpecVal;\n  nextDay?: CalendarSpecVal;\n  lastDay?: CalendarSpecVal;\n  nextWeek?: CalendarSpecVal;\n  lastWeek?: CalendarSpecVal;\n  sameElse?: CalendarSpecVal;\n\n  // any additional properties might be used with moment.calendarFormat\n  [x: string]: CalendarSpecVal | void; // undefined\n}\n\nexport function getCalendarFormat(date: Date, now: Date, config: DateParsingConfig) {\n  const _diff = diff(date, now, 'day', true, config);\n\n  switch (true) {\n    case _diff < -6: return 'sameElse';\n    case _diff < -1: return 'lastWeek';\n    case _diff < 0: return 'lastDay';\n    case _diff < 1: return 'sameDay';\n    case _diff < 2: return 'nextDay';\n    case _diff < 7: return 'nextWeek';\n    default: return 'sameElse';\n  }\n}\n\nexport function calendar(date: Date,\n                         time: Date,\n                         formats: CalendarSpec,\n                         locale: Locale = getLocale(),\n                         config: DateParsingConfig = {}): string {\n  // We want to compare the start of today, vs this.\n  // Getting start-of-today depends on whether we're local/utc/offset or not.\n  const now = time;\n  const sod = startOf(cloneWithOffset(now, date,  config), 'day', config._isUTC);\n  const format = getCalendarFormat(date, sod, {_isUTC: true, _offset: 0}) || 'sameElse';\n\n  let output;\n  if (formats) {\n    const _format = formats[format];\n    if (isString(_format)) {\n      output = _format;\n    }\n    if (isFunction(_format)) {\n      output = _format.call(null, date, now);\n    }\n  }\n\n  if (!output) {\n    output = locale.calendar(format, date, cloneDate(now));\n  }\n\n  return formatDate(date, output, config._locale._abbr, config._isUTC, config._offset);\n}\n"]}